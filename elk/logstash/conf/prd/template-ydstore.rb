class Box
  def initialize()
      @pkmap = {
        '8796093085014'=>'0000',
        '8796093117782'=>'3105',
        '8796093150550'=>'3101',
        '8796093183318'=>'3102',
        '8796093216086'=>'3103',
        '8796093248854'=>'3104',
        '8796125853014'=>'3113',
        '8796125885782'=>'2304',
        '8796125918550'=>'3108',
        '8796125951318'=>'3109',
        '8796125984086'=>'1101',
        '8796126016854'=>'3107',
        '8796126049622'=>'2302',
        '8796126082390'=>'3111',
        '8796126115158'=>'3110',
        '8796126147926'=>'3114',
        '8796126180694'=>'1404',
        '8796126213462'=>'2305',
        '8796126246230'=>'3115',
        '8796126278998'=>'1401',
        '8796126311766'=>'1203',
        '8796126344534'=>'3120',
        '8796126377302'=>'1301',
        '8796126410070'=>'3117',
        '8796126442838'=>'3121',
        '8796126475606'=>'1303',
        '8796126508374'=>'2301',
        '8796126541142'=>'3118',
        '8796126573910'=>'3106',
        '8796126606678'=>'3124',
        '8796126639446'=>'3123',
        '8796126672214'=>'1402',
        '8796126704982'=>'1403',
        '8796126737750'=>'2303',
        '8796126770518'=>'1302',
        '8796126803286'=>'3112',
        '8796126836054'=>'3122',
        '8796126868822'=>'3127',
        '8796126901590'=>'3133',
        '8796126934358'=>'3129',
        '8796126967126'=>'3135',
        '8796126999894'=>'3134',
        '8796127032662'=>'3128',
        '8796127065430'=>'3137',
        '8796127098198'=>'3139',
        '8796127130966'=>'3138',
        '8796127163734'=>'3141',
        '8796127196502'=>'3125',
        '8796127229270'=>'3143',
        '8796127262038'=>'3136',
        '8796127294806'=>'3132',
        '8796127327574'=>'3130',
        '8796127360342'=>'3147',
        '8796127393110'=>'3145',
        '8796127425878'=>'3148',
        '8796127458646'=>'3157',
        '8796127491414'=>'3202',
        '8796127524182'=>'3146',
        '8796127556950'=>'3201',
        '8796127589718'=>'3207',
        '8796127622486'=>'3206',
        '8796127655254'=>'3203',
        '8796127688022'=>'3158',
        '8796127720790'=>'3204',
        '8796127753558'=>'3159',
        '8796127786326'=>'3142',
        '8796127819094'=>'3149',
        '8796127851862'=>'3209',
        '8796127884630'=>'3211',
        '8796127917398'=>'3213',
        '8796127950166'=>'3210',
        '8796127982934'=>'3216',
        '8796128015702'=>'3217',
        '8796128048470'=>'3219',
        '8796128081238'=>'3215',
        '8796128114006'=>'3214',
        '8796128146774'=>'3223',
        '8796128179542'=>'3221',
        '8796128212310'=>'3301',
        '8796128245078'=>'3307',
        '8796128277846'=>'3302',
        '8796128310614'=>'3311',
        '8796128343382'=>'3313',
        '8796128376150'=>'3318',
        '8796128408918'=>'3320',
        '8796128441686'=>'3401',
        '8796128474454'=>'3321',
        '8796128507222'=>'3306',
        '8796128539990'=>'3402',
        '8796128572758'=>'3205',
        '8796128605526'=>'3208',
        '8796128638294'=>'3403',
        '8796128671062'=>'3316',
        '8796128703830'=>'3314',
        '8796128736598'=>'3319',
        '8796128769366'=>'3315',
        '8796128802134'=>'3502',
        '8796128834902'=>'3317',
        '8796128867670'=>'3503',
        '8796128900438'=>'3504',
        '8796128933206'=>'3506',
        '8796128965974'=>'3508',
        '8796128998742'=>'3705',
        '8796129031510'=>'3704',
        '8796129064278'=>'3309',
        '8796129097046'=>'3310',
        '8796129129814'=>'3701',
        '8796129162582'=>'3507',
        '8796129195350'=>'3312',
        '8796129228118'=>'3703',
        '8796129260886'=>'4601',
        '8796129293654'=>'3308',
        '8796129326422'=>'3702',
        '8796129359190'=>'3601',
        '8796129391958'=>'4602',
        '8796129424726'=>'6102',
        '8796129457494'=>'4101',
        '8796129490262'=>'3218',
        '8796129523030'=>'3303',
        '8796129555798'=>'5201',
        '8796129588566'=>'3224',
        '8796129621334'=>'3222',
        '8796129654102'=>'3501',
        '8796129686870'=>'3220'
      }
  end

  def getPkmap
      @pkmap
  end

end

def filter(event)
  box = Box.new();
  event.set('id', event.get('pk'))
  target = event.get('storelist')
  targets = target.split(',')
  uidlist = '#1'
  targets.each do |value|
    uid = box.getPkmap().fetch(value)
    if uid != nil
      uidlist = uidlist + ',' + uid 
    end
  end
  event.set('storeuidlist', uidlist);
  return [event]
end

